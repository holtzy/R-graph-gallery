<!-- This document provide the code for 2 modals related to the menu: i/ the modal showing all chart types ii/ the search bar utility -->

<!-- Modal menu: one icon per chart type with black background -->
<div
  class="portfolio-modal modal fade"
  id="LogoMenu"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
  style="background-color: black"
>
  <div
    class="modal-dialog h-100 modal-dialog-centered"
    style="width: 80%; max-width: 917px"
  >
    <div class="modal-content" style="background-color: black">
      <div
        class="close-modal"
        data-dismiss="modal"
        style="background-color: black"
      >
        <a href=""
          ><p style="color: white; text-align: right; font-size: 23px">
            &#10005;
          </p></a
        >
      </div>
      <div class="container" style="background-color: black">
        <div class="row">
          <div class="modal-body">
            <a href="violin.html">
              <img
                class="img-fluid imageOfMenu imageOfMenu"
                src="img/section/Violin150.png"
                alt=""
              /> </a
            ><a href="density-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Density150.png"
                alt=""
              /> </a
            ><a href="histogram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Histogram150.png"
                alt=""
              /> </a
            ><a href="boxplot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Box1150.png"
                alt=""
              /> </a
            ><a href="ridgeline-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Joyplot150.png"
                alt=""
              />
            </a>

            <a href="scatterplot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/ScatterPlot150.png"
                alt=""
              /> </a
            ><a href="heatmap">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Heatmap150.png"
                alt=""
              /> </a
            ><a href="correlogram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Correlogram150.png"
                alt=""
              /> </a
            ><a href="bubble-chart.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/BubblePlot150.png"
                alt=""
              /> </a
            ><a href="connected-scatterplot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/ScatterConnected150.png"
                alt=""
              /> </a
            ><a href="2d-density-chart.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/2dDensity150.png"
                alt=""
              />
            </a>

            <a href="barplot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Bar150.png"
                alt=""
              /> </a
            ><a href="spider-or-radar-chart.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Spider150.png"
                alt=""
              /> </a
            ><a href="wordcloud.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Wordcloud150.png"
                alt=""
              /> </a
            ><a href="parallel-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Parallel1150.png"
                alt=""
              /> </a
            ><a href="lollipop-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Lollipop150.png"
                alt=""
              /> </a
            ><a href="circular-barplot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/CircularBarplot150.png"
                alt=""
              />
            </a>

            <a href="treemap.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Tree150.png"
                alt=""
              /> </a
            ><a href="doughnut-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Doughnut150.png"
                alt=""
              /> </a
            ><a href="pie-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Pie150.png"
                alt=""
              /> </a
            ><a href="dendrogram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Dendrogram150.png"
                alt=""
              /> </a
            ><a href="circle-packing.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/CircularPacking150.png"
                alt=""
              /> </a
            ><a href="waffle.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Waffle2150.png"
                alt=""
              />
            </a>

            <a href="line-plot.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Line150.png"
                alt=""
              /> </a
            ><a href="area-chart.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Area150.png"
                alt=""
              /> </a
            ><a href="stacked-area-graph.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/StackedArea150.png"
                alt=""
              /> </a
            ><a href="streamgraph.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Stream150.png"
                alt=""
              />
            </a>
            <a href="time-series.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Time150.gif"
                alt=""
              />
            </a>

            <a href="map.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Map150.png"
                alt=""
              /> </a
            ><a href="choropleth-map.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Choropleth150.png"
                alt=""
              /> </a
            ><a href="hexbin-map.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/MapHexbin150.png"
                alt=""
              /> </a
            ><a href="cartogram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Cartogram150.png"
                alt=""
              /> </a
            ><a href="connection-map.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/ConnectedMap150.png"
                alt=""
              /> </a
            ><a href="bubble-map.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/BubbleMap150.png"
                alt=""
              />
            </a>

            <a href="chord-diagram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Chord150.png"
                alt=""
              /> </a
            ><a href="network.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Network150.png"
                alt=""
              /> </a
            ><a href="sankey-diagram.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Sankey150.png"
                alt=""
              /> </a
            ><a href="https://www.data-to-viz.com/graph/arc.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Arc150.png"
                alt=""
              /> </a
            ><a href="hierarchical-edge-bundling.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Bundle150.png"
                alt=""
              />
            </a>

            <a href="animation.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/anim150.gif"
                alt=""
              /> </a
            ><a href="interactive-charts.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Interactive150.png"
                alt=""
              /> </a
            ><a href="3d.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/3d150.png"
                alt=""
              /> </a
            ><a href="https://www.data-to-viz.com/caveats.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Bad150.png"
                alt=""
                target="_blank"
              /> </a
            ><a href="https://www.data-to-art.com/">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/DataArt1150.png"
                alt=""
                target="_blank"
              />
            </a>
            <a href="https://r-graph-gallery.com/ggplot2-color.html">
              <img
                class="img-fluid imageOfMenu"
                src="img/section/Colours150.png"
                alt=""
                target="_blank"
              />
            </a>
            <span>X</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Research Bar Modal -->
<div
  class="modal fade"
  id="researchModal"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
  style="margin-right: 20px; margin-left: 20px"
>
  <div class="modal-dialog modal-dialog-centered" style="max-width: 1000px">
    <div class="modal-content" style="min-height: 400px">
      <div class="close-modal" data-dismiss="modal">
        <a href=""
          ><p
            style="
              color: #b8b8b8;
              padding-right: 15px;
              padding-top: 5px;
              text-align: right;
              font-size: 23px;
            "
          >
            &#10005;
          </p></a
        >
      </div>
      <div class="container">
        <div class="row">
          <div class="modal-body">
            <!-- Project Details Go Here -->
            <div style="margin-top: 120px; margin-bottom: 120px">
              <center>
                <input
                  id="stringToSearch"
                  type="text"
                  name="usrname"
                  value="geom_bar"
                  style="
                    outline: 0;
                    border-width: 0 0 2px;
                    border-color: #b35900 !important;
                  "
                />
                <button
                  id="researchSubmitButton"
                  class="btn btn-secondary btn-md text-uppercase"
                  type="button"
                >
                  Submit
                </button>
              </center>
            </div>
            <div id="resultSearch"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="js/d3.v4.js"></script>
<script>
  // A function that returns a list of interesting pages for the query
  function returnPages() {
    // get the text that must been searched
    var toSearch = d3.select("#stringToSearch").property("value");
    var address =
      "https://api.github.com/search/code?q=%22" +
      toSearch +
      "%22+repo:holtzy/R-graph-gallery+extension:html";

    // Do the request to the gthub API
    d3.request(address)
      .mimeType("application/vnd.github.v3.text-match+json")
      .response(function (xhr) {
        var data = JSON.parse(xhr.responseText);

        // Div where I add the code
        div = d3.select("#resultSearch");

        // Erase the content of the div
        div.html("");

        // If no result, display a no result message
        if (data.items.length == 0) {
          div.html(
            "<center><p>😔<i>No result found, sorry...</i>😔</p></center>"
          );
        }

        // For each result item, add a section
        div
          .selectAll("resultItems")
          .data(data.items)
          .enter()
          .append("div")
          .html(function (d) {
            // Url to redirect to
            url = "https://www.r-graph-gallery.com/" + d.name;

            // Code selection: if 2 entries, keep only the second one.
            initialCode = d.text_matches[d.text_matches.length - 1].fragment;
            cleanCode = initialCode
              .replace("\n", "<br>")
              .replace("<li>", "")
              .replace(
                toSearch,
                "<span style='background-color: yellow'>" + toSearch + "</span>"
              );
            codeReady =
              "<p class='codeResearch'>....." + cleanCode + ".....</p>";
            return (
              "<br><br><a href=" +
              url +
              ">&rarr; " +
              d.name +
              "</a>" +
              "<br>" +
              codeReady
            );
          });
      })
      .get();
  }

  // When the submit button is triggered, run the function
  d3.select("#researchSubmitButton").on("click", returnPages);

  // If the 'Enter' key is pressed, trigger the function as well
  var input = document.getElementById("stringToSearch");
  input.addEventListener("keyup", function (event) {
    event.preventDefault();
    if (event.keyCode === 13) {
      document.getElementById("researchSubmitButton").click();
    }
  });
</script>
