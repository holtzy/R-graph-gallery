<!doctype html>
<html lang="en">
  <head>
    <!-- Google Analytics + AdThrive -->

    <!-- AdThrive Head Tag Manual -->
    <script data-no-optimize="1" data-cfasync="false">
      (function (w, d) {
        w.adthrive = w.adthrive || {};
        w.adthrive.cmd = w.adthrive.cmd || [];
        w.adthrive.plugin = "adthrive-ads-manual";
        w.adthrive.host = "ads.adthrive.com";
        var s = d.createElement("script");
        s.async = true;
        s.referrerpolicy = "no-referrer-when-downgrade";
        s.src =
          "https://" +
          w.adthrive.host +
          "/sites/6434363fc11d8059e61106b4/ads.min.js?referrer=" +
          w.encodeURIComponent(w.location.href) +
          "&cb=" +
          (Math.floor(Math.random() * 100) + 1);
        var n = d.getElementsByTagName("script")[0];
        n.parentNode.insertBefore(s, n);
      })(window, document);
    </script>
    <!-- End of AdThrive Head Tag -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-79254642-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-79254642-1");
    </script>

    <!-- Google Analytics + OutboundLink + Google Adsense -->

    <meta charset="utf-8" />
    <title>Customized Dorling cartogram with
R &#8211; the R Graph Gallery</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="This post explains how to build a
Dorling Cartogram with R and ggplot2. Explanation and reproducible code
provided." />
    <meta
      name="keywords"
      content="R,ggplot2,tidyverse,Example,Data,Dataviz,Datavisualization,Plot,Chart,Graph,Learning,Caveat,Pitfall,Mistake"
    />
    <meta name="author" content="Yan Holtz" />
    <link rel="icon" href="img/logo/R_single_small.png" />

    <!-- Control appearance when shared by social media -->
    <meta property="og:title" content="Customized Dorling cartogram with
R" />
    <meta property="og:image" content="img/overview_RGG.png" />
    <meta property="og:description" content="This post explains how to
build a Dorling Cartogram with R and ggplot2. Explanation and
reproducible code provided." />
    <meta
      property="og:url"
      content="https://www.r-graph-gallery.com/web-dorling-cartogram-with-R.html.html"
    />
    <meta property="og:type" content="website" />

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom fonts for this template -->
    <link
      href="vendor/font-awesome/css/font-awesome.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet" />

    <!-- JQUERY -->
    <script src="vendor/jquery/jquery.min.js"></script>
  </head>

  <body data-spy="scroll" data-target="#myScrollspy" data-offset="1">
    <!-- THIS ALLOWS TO INSERT THE MENU THAT IS STORED IN A MENU.HTML FILE-->
    <nav class="navbar navbar-expand-lg fixed-top" id="mainNav"></nav>
    <script>
      $(function () {
        $("#mainNav").load("html_chunk/menu.html");
      });
    </script>

    <!-- THIS ALLOWS TO INSERT THE MODAL OF THE MENU THAT IS STORED IN A MENU_MODAL.HTML FILE-->
    <div id="modal_menu_insertion"></div>
    <script>
      $(function () {
        $("#modal_menu_insertion").load("html_chunk/menu_modal.html");
      });
    </script>

    <!-- Header = Title in big + social media Icon + quick description -->
    <header class="masthead" style="padding-bottom: 30px">
      <div class="textlanding">
        <center><h1>Customized Dorling cartogram with R</h1></center>
        <hr class="short_hr" />
        <br />
        <ul class="list-inline social-buttons">
          <li class="list-inline-item">
            <a href="https://twitter.com/R_Graph_Gallery">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li class="list-inline-item social-buttons">
            <a href="https://github.com/holtzy">
              <i class="fa fa-github" style="color: white"></i>
            </a>
          </li>
          <li class="list-inline-item social-buttons">
            <a href="https://www.linkedin.com/in/yan-holtz-2477534a/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
          <li class="list-inline-item social-buttons">
            <a href="https://www.yan-holtz.com">
              <i class="fa fa-home"></i>
            </a>
          </li>
        </ul>
        <center>
          <p style="max-width: 600px; margin-top: 40px">This blogpost
explains how to build a <strong>Dorling Cartogram</strong> with
<code>R</code>. A dorling cartogram is a variation of a <a
href="https://r-graph-gallery.com/cartogram.html">cartogram</a>, close
to a <a href="https://r-graph-gallery.com/bubble-map.html">bubble
map</a>.<br/>The chart is implemented using the <code>ggplot2</code>,
<code>cartogram</code>, <code>sf</code> and a few other packages. This
article includes a step-by-step walkthrough of the map construction,
together with its final reproducible code.</p>
        </center>
        <div style="text-align: center">
          <a
            class="btn btn-secondary btn-xl text-uppercase js-scroll-trigger"
            href="bubble-map.html"
            >Cartogram section</a
          >
          <a
            class="btn btn-secondary btn-xl text-uppercase js-scroll-trigger"
            href="https://www.data-to-viz.com/graph/bubble-map.html"
            >Data to Viz</a
          >
        </div>
      </div>
    </header>

    <!-- THIS ALLOWS TO INSERT THE ADVERTISEMENT BANNER THAT IS STORED IN A BANNER.HTML FILE-->
    <div id="position_for_images"></div>
    <script>
      $(function () {
        $("#position_for_images").load("html_chunk/images.html");
      });
    </script>

    
    <!-- STYLE for chart pages but not the rest of tthe website -->
    <style>
      img {
        margin-top: 20px;
      }
    </style>

    <div class="container" style="padding-top: 100px">
<p>A Dorling cartogram replaces polygons with circles proportional to a
given variable, respecting the spatial position of the polygons as much
as possible. So normally <strong>only one variable can be represented
with a Dorling cartogram</strong>.</p>
<p>This tutorial will show how these cartograms can be adapted to
represent the value of sub-variables. For this tutorial, the main
variable that we will plot as a Dorling cartogram is <strong>the total
agricultural land per country</strong>. The sub-variables we are going
to add are <strong>arable land area</strong> (~crop land) and
<strong>permanent grass area</strong>.</p>
<div id="load-data" class="section level1">
<h1>1. Load data</h1>
<hr />
<p>To create our customized Dorling cartogram, we will need these
packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(cartogram)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(ggforce)</span></code></pre></div>
<p>We will download the world basemap with {rnaturalearth}. Data about
agricultural land use have been downloaded from <a
href="https://www.fao.org/faostat/en/#home">FAOStat</a>. Data may be
downloaded at <a
href="https://raw.githubusercontent.com/BjnNowak/dorling_map/main/data/FAOSTAT_land_use_2020.csv">this
link</a> or loaded directy in R as shown below:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="dv">110</span>, <span class="at">type =</span> <span class="st">&quot;countries&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="co"># Convert WGS84 to projected crs (here Robinson)</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(world_ne, <span class="at">crs=</span><span class="st">&quot;ESRI:54030&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/BjnNowak/dorling_map/main/data/FAOSTAT_land_use_2020.csv&#39;</span>)</span></code></pre></div>
<p>For data cleaning, we will create one column per variable of interest
(total agricultural land, crop land and grass land), then join the data
to the map.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>clean <span class="ot">&lt;-</span> data<span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">iso_a3=</span><span class="st">&#39;Area Code (ISO3)&#39;</span>,<span class="at">item=</span>Item,<span class="at">surface=</span>Value)<span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="co"># Simplify variable names</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">item=</span><span class="fu">case_when</span>(</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    item<span class="sc">==</span><span class="st">&quot;Agricultural land&quot;</span><span class="sc">~</span><span class="st">&quot;total&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    item<span class="sc">==</span><span class="st">&quot;Arable land&quot;</span><span class="sc">~</span><span class="st">&quot;crop&quot;</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    item<span class="sc">==</span><span class="st">&quot;Permanent meadows and pastures&quot;</span><span class="sc">~</span><span class="st">&quot;grass&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  ))<span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>  <span class="co"># Pivot from long to wide</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>item,<span class="at">values_from=</span>surface)</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co"># Join data to world map</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>map <span class="ot">&lt;-</span> world<span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>  <span class="fu">left_join</span>(clean)<span class="sc">%&gt;%</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  <span class="fu">drop_na</span>(total)</span></code></pre></div>
<p>Before going further, we will make a simple choropleth showing total
agricultural land per country:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">ggplot</span>(map, <span class="fu">aes</span>(<span class="at">fill=</span>total))<span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>It is this map that will be converted as a Dorling cartogram.</p>
</div>
<div id="make-dorling-cartogram" class="section level1">
<h1>2. Make Dorling cartogram</h1>
<hr />
<p>It is really straightforward to make a Dorling cartogram with the
{cartogram} library!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Making Dorling cartogram based on total agricultural land</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>dorl<span class="ot">&lt;-</span>cartogram<span class="sc">::</span><span class="fu">cartogram_dorling</span>(</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  map, <span class="at">weight=</span><span class="st">&#39;total&#39;</span>, <span class="at">k =</span> <span class="dv">5</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">m_weight =</span> <span class="dv">1</span>, <span class="at">itermax =</span> <span class="dv">1000</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>)</span></code></pre></div>
<p>As the circles layout may be confusing, I like to use a “traditional”
map as background when plotting a Dorling cartogram:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Set colors</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>col_world <span class="ot">&lt;-</span> <span class="st">&quot;#9CB4BF&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>col_back <span class="ot">&lt;-</span> <span class="st">&quot;#1D201F&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co"># Set theme</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>theme_custom <span class="ot">&lt;-</span> <span class="fu">theme_void</span>()<span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span>col_back,<span class="at">color=</span><span class="cn">NA</span>))</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  <span class="co"># World basemap</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    world,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>    <span class="at">fill=</span>col_world,<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.25</span>)</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>  <span class="co"># Dorling cartogram</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    dorl,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.75</span>),<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;white&quot;</span>,<span class="fl">0.2</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>  theme_custom</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Up to this point, we have a classic Dorling cartogram, with circles
proportional to total agricultural land, which is easy to plot with
<code>geom_sf()</code>. But, in order to add supplementary variables to
our map, we will extract some features from this map: <strong>the radius
and the coordinates of the centroids for each circus</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Compute area and radius for each circus of the cartogram</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>dorl<span class="ot">&lt;-</span>dorl<span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="co"># Compute area</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    <span class="at">ar=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dorl)),</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="co"># Compute radius based on area</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    <span class="at">rad=</span><span class="fu">as.numeric</span>(<span class="fu">sqrt</span>(ar<span class="sc">/</span>pi))</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>  )</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co"># Extract centroids for each circle</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>centr <span class="ot">&lt;-</span> dorl<span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  <span class="fu">st_centroid</span>()<span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="fu">st_coordinates</span>()</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="co"># Combine data</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>dorl2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(dorl,<span class="at">X=</span>centr[,<span class="dv">1</span>],<span class="at">Y=</span>centr[,<span class="dv">2</span>])<span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>total)</span></code></pre></div>
<p>With these features, we may now make the same map as before, but
using the <code>geom_circle()</code> function from the {ggforce}
package.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="co"># World basemap</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    world,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="at">fill=</span>col_world,<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.25</span>)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="co"># Draw Dorling cartogram with geom_circle()</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_circle</span>(</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    <span class="at">data =</span> dorl2, <span class="fu">aes</span>(<span class="at">x0 =</span> X, <span class="at">y0 =</span> Y, <span class="at">r =</span> rad),</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.75</span>),<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;white&quot;</span>,<span class="fl">0.2</span>)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  theme_custom</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="add-supplementary-variables-to-cartogram"
class="section level1">
<h1>3. Add supplementary variables to cartogram</h1>
<hr />
<p>The interest of calculating such features is that we can now use this
workflow to compute the related radius for the surface under crop or
grass (centroids will be the same).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>dorl2 <span class="ot">&lt;-</span> dorl2 <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="at">ratio_crop =</span> crop<span class="sc">/</span>total,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="at">ratio_grass =</span> grass<span class="sc">/</span>total</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  )<span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="at">rad_crop=</span><span class="fu">sqrt</span>(rad<span class="sc">*</span>rad<span class="sc">*</span>ratio_crop),</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    <span class="at">rad_grass=</span><span class="fu">sqrt</span>(rad<span class="sc">*</span>rad<span class="sc">*</span>ratio_grass)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  )</span></code></pre></div>
<p>This way we can add the crop (or grass) area for each country to the
map:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>col_crop <span class="ot">&lt;-</span> <span class="st">&quot;#f2e901&quot;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>col_grass <span class="ot">&lt;-</span> <span class="st">&quot;#51c26f&quot;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="co"># World basemap</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    world,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">fill=</span>col_world,<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.25</span>)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>  <span class="co"># Draw Dorling cartogram with geom_circle()</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_circle</span>(</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>    <span class="at">data =</span> dorl2, <span class="fu">aes</span>(<span class="at">x0 =</span> X, <span class="at">y0 =</span> Y, <span class="at">r =</span> rad),</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.75</span>),<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;white&quot;</span>,<span class="fl">0.2</span>)</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>  <span class="co"># Draw circle for crops (or grass)</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_circle</span>(</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    <span class="at">data =</span> dorl2, <span class="fu">aes</span>(<span class="at">x0 =</span> X, <span class="at">y0 =</span> Y, <span class="at">r =</span> rad_crop),</span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>    <span class="at">fill=</span>col_crop,<span class="at">color=</span><span class="cn">NA</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>  theme_custom</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>But with this method it is not possible to plot at the same time the
total area, the crop area and the grass area. To overcome this limit, we
will plot two half circles (one for crop, one for grass) on the map.</p>
<p>The function below, adapted from <a
href="https://stackoverflow.com/questions/28185743/draw-a-half-circle-with-ggplot2">this
post</a> on StackOverflow allows to draw circle portions:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>circleFun <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="at">center=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),   <span class="co"># center of the circle </span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="at">diameter=</span><span class="dv">1</span>,      <span class="co"># diameter </span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="at">npoints=</span><span class="dv">100</span>,     <span class="co"># number of points to draw the circle</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="at">start=</span><span class="dv">0</span>, <span class="at">end=</span><span class="dv">2</span>   <span class="co"># start point/end point</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  ){</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>      tt <span class="ot">&lt;-</span> <span class="fu">seq</span>(start<span class="sc">*</span>pi, end<span class="sc">*</span>pi, <span class="at">length.out=</span>npoints)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>      tb <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>        <span class="at">x =</span> center[<span class="dv">1</span>] <span class="sc">+</span> diameter <span class="sc">/</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">cos</span>(tt), </span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>        <span class="at">y =</span> center[<span class="dv">2</span>] <span class="sc">+</span> diameter <span class="sc">/</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">sin</span>(tt)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>      )</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="fu">return</span>(tb)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>}</span></code></pre></div>
<p>As an example, we will use this function to draw two half circles
(one for crop, one for grass) for the first country of the map,
China:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Half circle for crops</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>half_crop <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">iso_a3 =</span> <span class="fu">rep</span>(dorl2<span class="sc">$</span>iso_a3[<span class="dv">1</span>],<span class="dv">100</span>),</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="fu">circleFun</span>(</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="fu">c</span>(dorl2<span class="sc">$</span>X[<span class="dv">1</span>],dorl2<span class="sc">$</span>Y[<span class="dv">1</span>]),dorl2<span class="sc">$</span>rad_crop[<span class="dv">1</span>]<span class="sc">*</span><span class="dv">2</span>, <span class="at">start=</span><span class="fl">1.5</span>, <span class="at">end=</span><span class="fl">2.5</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>  ))</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co"># Half circle for grass</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>half_grass <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>  <span class="at">iso_a3 =</span> <span class="fu">rep</span>(dorl2<span class="sc">$</span>iso_a3[<span class="dv">1</span>],<span class="dv">100</span>),</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>  <span class="fu">circleFun</span>(</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>    <span class="fu">c</span>(dorl2<span class="sc">$</span>X[<span class="dv">1</span>],dorl2<span class="sc">$</span>Y[<span class="dv">1</span>]),dorl2<span class="sc">$</span>rad_grass[<span class="dv">1</span>]<span class="sc">*</span><span class="dv">2</span>, <span class="at">start=</span><span class="fl">0.5</span>, <span class="at">end=</span><span class="fl">1.5</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>  ))</span></code></pre></div>
<p>These half-circles will be added to the map using the
<code>geom_polygon()</code> function, which allows to join points.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="co"># World basemap</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    world,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="at">fill=</span>col_world,<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.25</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="co"># Draw Dorling cartogram with geom_circle()</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_circle</span>(</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    <span class="at">data =</span> dorl2, <span class="fu">aes</span>(<span class="at">x0 =</span> X, <span class="at">y0 =</span> Y, <span class="at">r =</span> rad),</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.75</span>),<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;white&quot;</span>,<span class="fl">0.2</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>  <span class="co"># Draw half circle for crop with geom_polygon</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>    half_crop,</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(x,y,<span class="at">group=</span>iso_a3),</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>    <span class="at">fill=</span>col_crop,<span class="at">color=</span><span class="cn">NA</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>  )<span class="sc">+</span> </span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>  <span class="co"># Draw half circle for grass with geom_polygon</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>    half_grass,</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(x,y,<span class="at">group=</span>iso_a3),</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>    <span class="at">fill=</span>col_grass,<span class="at">color=</span><span class="cn">NA</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a>  )<span class="sc">+</span> </span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a>  theme_custom</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Now that we detailed the workflow for one country, we just have to
extend it to the rest of the world, <strong>using a for
loop</strong>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Make loop for all countries</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">dim</span>(dorl2)[<span class="dv">1</span>]){</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="co"># Draw for crops</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  temp_crop <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="at">iso_a3 =</span> <span class="fu">rep</span>(dorl2<span class="sc">$</span>iso_a3[i],<span class="dv">100</span>),</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="fu">circleFun</span>(</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>      <span class="fu">c</span>(dorl2<span class="sc">$</span>X[i],dorl2<span class="sc">$</span>Y[i]),dorl2<span class="sc">$</span>rad_crop[i]<span class="sc">*</span><span class="dv">2</span>, <span class="at">start=</span><span class="fl">1.5</span>, <span class="at">end=</span><span class="fl">2.5</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    ))</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="co"># Draw for grass</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>  temp_grass <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>    <span class="at">iso_a3 =</span> <span class="fu">rep</span>(dorl2<span class="sc">$</span>iso_a3[i],<span class="dv">100</span>),</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>    <span class="fu">circleFun</span>(</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>      <span class="fu">c</span>(dorl2<span class="sc">$</span>X[i],dorl2<span class="sc">$</span>Y[i]),dorl2<span class="sc">$</span>rad_grass[i]<span class="sc">*</span><span class="dv">2</span>, <span class="at">start=</span><span class="fl">0.5</span>, <span class="at">end=</span><span class="fl">1.5</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>    ))</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>  </span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>  half_crop<span class="ot">&lt;-</span>half_crop<span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>    <span class="fu">bind_rows</span>(temp_crop)</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>  </span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  half_grass<span class="ot">&lt;-</span>half_grass<span class="sc">%&gt;%</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>    <span class="fu">bind_rows</span>(temp_grass)</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>}</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="co"># Make map</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>  <span class="co"># World basemap</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>  <span class="fu">geom_sf</span>(</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>    world,<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">geometry=</span>geometry),</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>    <span class="at">fill=</span>col_world,<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.25</span>)</span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>  <span class="co"># Draw Dorling cartogram with geom_circle()</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_circle</span>(</span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>    <span class="at">data =</span> dorl2, <span class="fu">aes</span>(<span class="at">x0 =</span> X, <span class="at">y0 =</span> Y, <span class="at">r =</span> rad),</span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">alpha</span>(<span class="st">&quot;dimgrey&quot;</span>,<span class="fl">0.75</span>),<span class="at">color=</span><span class="fu">alpha</span>(<span class="st">&quot;white&quot;</span>,<span class="fl">0.2</span>)</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a>  <span class="co"># Draw half circle for crop with geom_polygon</span></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>    half_crop,</span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(x,y,<span class="at">group=</span>iso_a3),</span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a>    <span class="at">fill=</span>col_crop,<span class="at">color=</span><span class="cn">NA</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a>  )<span class="sc">+</span> </span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a>  <span class="co"># Draw half circle for grass with geom_polygon</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a>    half_grass,</span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(x,y,<span class="at">group=</span>iso_a3),</span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a>    <span class="at">fill=</span>col_grass,<span class="at">color=</span><span class="cn">NA</span></span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>  )<span class="sc">+</span> </span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>  theme_custom</span></code></pre></div>
<p><img src="web-dorling-cartogram-with-R_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Now feel free to adapt this tutorial to your project! For example, it
is also possible to represent more than two sub-variables per circle, by
modifying the start and end arguments of the <code>circleFun()</code>
function.</p>
<p><strong>Author</strong> <a
href="https://twitter.com/BjnNowak">Benjamin Nowak</a> <br>
<strong>Data</strong> <a
href="https://www.fao.org/faostat/en/#home">FAOStat</a></p>
<!-- Close container -->
</div>
</div>
<!-- ============================ RELATED SECTION ============================ -->
<section class="bg-light" id="portfolio_landing" style="padding-top: 30px; padding-bottom: 30px; margin-top: 100px;">

<div class="container">

  <p class="mySeryTitle">Related chart types</p>
  <hr>
  <div class="row">
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="map.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/Map150.png" alt="">
      </a>
      <div class="captionPortfolio">Map</div>
    </div>
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="choropleth-map.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/Choropleth150.png" alt="">
      </a>
      <div class="captionPortfolio">Choropleth</div>
    </div>
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="hexbin-map.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/MapHexbin150.png" alt="">
      </a>
      <div class="captionPortfolio">Hexbin map</div>
    </div>
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="cartogram.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/Cartogram150.png" alt="">
      </a>
      <div class="captionPortfolio">Cartogram</div>
    </div>
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="connection-map.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/ConnectedMap150.png" alt="">
      </a>
      <div class="captionPortfolio">Connection</div>
    </div>
    <div class="col-md-2 col-sm-4 portfolio-item">
      <a class="portfolio-link"  href="bubble-map.html">
        <div class="portfolio-hover">
          <div class="portfolio-hover-content">
            <i class="fa fa-plus fa-3x"></i>
          </div>
        </div>
        <img class="img-fluid" src="img/section/BubbleMap150.png" alt="">
      </a>
      <div class="captionPortfolio">Bubble map</div>
    </div>
  </div>

</div>
</section> 
    <!-- ============================ CONTACT SECTION ============================ -->
    <section
      id="contact"
      class="bg"
      style="background-color: white; padding-top: 60px"
    >
      <div class="container">
        <div class="row">
          <div class="col-lg-2 text-center"></div>
          <div class="col-lg-8 text-center">
            <br /><br /><br />
            <h2 class="section-heading text-uppercase" style="color: black">
              Contact
            </h2>
            <p>
              This document is a work by
              <a href="https://www.yan-holtz.com">Yan Holtz</a>. Any feedback is
              highly encouraged. You can fill an issue on
              <a href="https://github.com/holtzy/D3-graph-gallery/issues"
                >Github</a
              >, drop me a message on
              <a href="https://twitter.com/R_Graph_Gallery">Twitter</a>, or send
              an email pasting <a href="">yan.holtz.data</a> with
              <a href="">gmail.com</a>.
            </p>
            <div style="text-align: center">
              <a
                class="btn btn-primary btn-xl text-uppercase js-scroll-trigger"
                href="https://github.com/holtzy"
                >Github</a
              >
              <a
                class="btn btn-primary btn-xl text-uppercase js-scroll-trigger"
                href="https://twitter.com/R_Graph_Gallery"
                >Twitter</a
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================ FOOTER SECTION ============================ -->

    <!-- AdThrive Footer Code Start-->
    <script
      type="text/javascript"
      async
      src="https://btloader.com/tag?o=5698917485248512&upapi=true&domain=r-graph-gallery.com"
    ></script>
    <script>
      !(function () {
        "use strict";
        var e;
        (e = document),
          (function () {
            var t, n;
            function r() {
              var t = e.createElement("script");
              (t.src =
                "https://cafemedia-com.videoplayerhub.com/galleryplayer.js"),
                e.head.appendChild(t);
            }
            function a() {
              var t = e.cookie.match("(^|[^;]+)\s*__adblocker\s*=\s*([^;]+)");
              return t && t.pop();
            }
            function c() {
              clearInterval(n);
            }
            return {
              init: function () {
                var e;
                "true" === (t = a())
                  ? r()
                  : ((e = 0),
                    (n = setInterval(function () {
                      (100 !== e && "false" !== t) || c(),
                        "true" === t && (r(), c()),
                        (t = a()),
                        e++;
                    }, 50)));
              },
            };
          })().init();
      })();
    </script>
    <!-- AdThrive Footer Code End -->

    <footer class="bg-light" id="myFooter">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="copyright"
              >Copyright &copy; the R graph gallery 2018</span
            >
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a href="https://twitter.com/R_Graph_Gallery">
                  <i class="fa fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://github.com/holtzy">
                  <i class="fa fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.linkedin.com/in/yan-holtz-2477534a/">
                  <i class="fa fa-linkedin"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <script>

      // add bootstrap table styles to pandoc tables
      function bootstrapStylePandocTables() {
        $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
      }
      $(document).ready(function () {
        bootstrapStylePandocTables();
      });

          </script>

    
    <!-- ============================ JAVASCRIPT SECTION ============================ -->

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>
  </body>
</html>
